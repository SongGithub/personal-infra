---
version: '2.0'
services:
  base:
    build: .
    volumes:
      - "$HOME/.aws:/root/.aws"
      - "$HOME/.kube:/root/.kube"
      - ".:/app"
      - "$HOME/.ssh:/root/.ssh"
    working_dir: /app

  stackup:
    image: realestate/stackup:1.4.1
    volumes:
      - "$HOME/.aws:/root/.aws"
      - ".:/app"
    working_dir: /app
    entrypoint: stackup
    environment:
      - AWS_DEFAULT_REGION=ap-southeast-2

  gomplate:
    image: hairyhenderson/gomplate:latest
    volumes:
      - ".:/app"
    working_dir: /app
    entrypoint: /gomplate

  awscli:
    image: myobplatform/aws-jq:0.1.0
    working_dir: /app
    volumes:
      - "$HOME/.kube:/root/.kube"
      - "$HOME/.aws:/root/.aws"
      - ".:/app"
    environment:
      - AWS_DEFAULT_REGION=ap-southeast-2
